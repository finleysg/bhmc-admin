PRD 1.1 DONE: MemberScoresService created
- File: apps/api/src/reports/member-scores.service.ts
- Exports getPlayerScoresExcel(playerId, season, courseIds?, scoreType)
- Queries via Drizzle, sorts by course/date, generates Gross/Net sheets
- Uses excel.utils.ts patterns from ReportsService

PRD 1.2+1.3 DONE: MemberReportsController + module registration
- Created: apps/api/src/reports/member-reports.controller.ts
- GET reports/member/scores/:season/export (no @Admin)
- Query params: courseIds (comma-sep), scoreType (default 'both')
- Returns xlsx with Content-Disposition: my-scores-{season}.xlsx
- Used string param + cast for ScoreType to avoid decorator metadata issue
- Updated reports.module.ts with controller + service registration

PRD 1.4 DONE: useExportScores hook
- Created: apps/public/src/hooks/use-export-scores.ts
- useMutation wrapping fetch to reports/member/scores/{season}/export
- Query params: courseIds (comma-sep), scoreType
- Uses credentials: 'include', triggers blob download
- Filename: my-scores-{season}.xlsx

PRD 1.5+1.6+1.7 DONE: ExportScoresButton + consuming components
- Updated: apps/public/src/components/scores/export-scores-button.tsx
  - Props: season, courseIds?, scoreType?, disabled (removed rounds)
  - Uses useExportScores hook, isPending disables button
- Updated: apps/public/src/components/scores/player-scores.tsx
  - ExportScoresButton moved inline, receives season/courseIds/scoreType
  - Removed onFilteredRoundsChange callback, unused filteredRounds logic
  - Added exportCourseIds derived from selectedCourseId
- Updated: apps/public/src/screens/member/member-scores.tsx
  - Simplified: just renders PlayerScores
- Updated: apps/public/src/screens/account/player-scores.tsx
  - Simplified: just renders PlayerScores

PRD 1.8 DONE: Remove xlsx dependency from public app
- File: apps/public/package.json
- Removed xlsx from dependencies
- No remaining xlsx imports in codebase
- Note: pnpm install/build verification blocked by env issues (rollup platform mismatch)

PRD 1.9 DONE: MemberScoresService tests
- Created: apps/api/src/reports/__tests__/member-scores.service.test.ts
- Tests query filtering (playerId, season, courseIds)
- Tests scoreType variants: gross, net, both
- Verifies worksheet names: "Gross Scores", "Net Scores"
- Verifies column structure: Date, Tee, Type, Course, 1-9, Total
- Tests sorting by course name then date
- Tests edge cases: empty results, null tee, total calculation
- Note: Test execution blocked by env issues (pnpm install permission errors)

PRD 1.10 DONE: MemberReportsController tests
- Created: apps/api/src/reports/__tests__/member-reports.controller.test.ts
- Tests correct Content-Type/Content-Disposition headers
- Tests playerId from authenticated user passed to service
- Tests season param in filename and service call
- Tests courseIds parsing (comma-sep string to number array)
- Tests scoreType handling (gross, net, defaults to 'both')
- Note: Test execution blocked by env issues (pnpm install permission errors)

PRD 1.11 DONE: useExportScores hook tests
- Created: apps/public/src/hooks/__tests__/use-export-scores.test.tsx
- Uses MSW to mock API endpoint, QueryClientProvider wrapper
- Tests URL construction: season only, with courseIds, with scoreType, all params
- Tests empty courseIds array skipped in query params
- Tests download trigger: createObjectURL, link click, appendChild/removeChild, revokeObjectURL
- Tests filename: my-scores-{season}.xlsx
- Tests error handling on non-ok response
- Note: Test execution blocked by env issues (pnpm install permission errors)
